<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Golang time.Parse の使い方 | ayasuda.github.io</title>
<meta name=keywords content="Go,golang,time,time.Parse"><meta name=description content="Go 言語で文字列を`Time` 構造体に変換する `time.Parse` の使い方をまとめました"><meta name=author content="ayasuda"><link rel=canonical href=https://ayasuda.github.io/pages/snippet_golang_time_parse/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ayasuda.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ayasuda.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ayasuda.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ayasuda.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ayasuda.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ayasuda.github.io/pages/snippet_golang_time_parse/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Golang time.Parse の使い方"><meta property="og:description" content="Go 言語で文字列を`Time` 構造体に変換する `time.Parse` の使い方をまとめました"><meta property="og:type" content="article"><meta property="og:url" content="https://ayasuda.github.io/pages/snippet_golang_time_parse/"><meta property="article:section" content="pages"><meta property="article:published_time" content="2019-07-23T00:00:00+00:00"><meta property="article:modified_time" content="2019-07-23T00:00:00+00:00"><meta property="og:site_name" content="ayasuda.gihtub.io"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang time.Parse の使い方"><meta name=twitter:description content="Go 言語で文字列を`Time` 構造体に変換する `time.Parse` の使い方をまとめました"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pages","item":"https://ayasuda.github.io/pages/"},{"@type":"ListItem","position":2,"name":"Golang time.Parse の使い方","item":"https://ayasuda.github.io/pages/snippet_golang_time_parse/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Golang time.Parse の使い方","name":"Golang time.Parse の使い方","description":"Go 言語で文字列を`Time` 構造体に変換する `time.Parse` の使い方をまとめました","keywords":["Go","golang","time","time.Parse"],"articleBody":"この記事では、Golang で文字列を Time 構造体に変換する time.Parse の使い方を解説しつつ 使用例のコード片を提示します。\n基本的な使い方 第１引数に、時刻のフォーマット定義を指定し、第２引数にパースしたい文字列を指定します。\nフォーマットは、必ず 2006年1月2日午後3時4分5秒(山岳部標準時) である必要があります。 なんでこの時間？　と、一瞬思いますが、月日時分秒年の順番で表記した時、左から 1,2,3,4,5,6,7 と増えていきます。\n山岳部標準時は -7 です。\n時刻を24時間表記でパースさせたい場合は、15 を指定します。\npackage main import ( \"fmt\" \"time\" ) func main() { // パースする対象である時間がどのように参照されているかのフォーマット定義です layout := \"Jan 2, 2006 at 3:04pm (MST)\" // パースする対象の文字列です value := \"Feb 3, 2013 at 7:54pm (PST)\" t, _ := time.Parse(layout, value) fmt.Println(t) // 2013-02-03 19:54:00 +0000 PST } https://play.golang.org/p/Y5yLTbfcULl\n一部の定義を省略する フォーマット定義およびパースしたい文字列から一部の値を外した場合、デフォルトとして 0 が、 0 が設定できない場合 1 が設定されます。 タイムゾーンの場合は UTC が設定されます。\n下記の例では、時刻やタイムゾーンを省略したため、時・分・秒に 0 が、タイムゾーンに UTC がセットされます。 年を省略した場合は 0 が、月・日を省略した場合は、 1 がセットされます。\npackage main import ( \"fmt\" \"time\" ) func main() { layout := \"2006-01-02\" value := \"2019-07-23\" t, e := time.Parse(layout, value) if e != nil { fmt.Println(e) } fmt.Println(t) // 2019-07-23 00:00:00 +0000 UTC } https://play.golang.org/p/twodyyYITV6\nつまり、何もかも省略した場合は、0000-01-01 00:00:00 +0000 UTC になります。\npackage main import ( \"fmt\" \"time\" ) func main() { layout := \"\" value := \"\" t, e := time.Parse(layout, value) if e != nil { fmt.Println(e) } fmt.Println(t) // 0000-01-01 00:00:00 +0000 UTC } https://play.golang.org/p/1xG2G0FNSd1\nformat と layout のフォーマットが違うとエラーになります。 例えば、下記の例を見てみましょう。\nフォーマット定義ではタイムゾーン指定を削りましたが、パースしたい文字列ではタイムゾーンが指定されています。なので、エラーになります。。 この場合、パースすると必ず 0001-01-01 00:00:00 +0000 UTC になります。\npackage main import ( \"fmt\" \"time\" ) func main() { layout := \"Jan 2, 2006 at 3:04pm\" value := \"Feb 3, 2013 at 7:54pm (PST)\" t, _ := time.Parse(layout, value) if e != nil { fmt.Println(e) // parsing time \"Oct 3, 1986 at 8:07am (PST)\": extra text: (PST) } fmt.Println(t) // 0001-01-01 00:00:00 +0000 UTC } https://play.golang.org/p/JOeniv_Y0Wv\nフォーマットに日本語を使う フォーマットに使用する日時さえあってれば可能です。\npackage main import ( \"fmt\" \"time\" ) func main() { layout := \"2006年01月02日 15時04分05秒 (MST)\" value := \"2019年07月23日 20時10分11秒 (JST)\" t, e := time.Parse(layout, value) if e != nil { fmt.Println(e) } fmt.Println(t) // 2019-07-23 20:10:11 +0000 JST } https://play.golang.org/p/dlwONJnLH8i\n組み込みフォーマット timeパッケージの定数 に定義されています。\nconst ( ANSIC = \"Mon Jan _2 15:04:05 2006\" UnixDate = \"Mon Jan _2 15:04:05 MST 2006\" RubyDate = \"Mon Jan 02 15:04:05 -0700 2006\" RFC822 = \"02 Jan 06 15:04 MST\" RFC822Z = \"02 Jan 06 15:04 -0700\" // RFC822 with numeric zone RFC850 = \"Monday, 02-Jan-06 15:04:05 MST\" RFC1123 = \"Mon, 02 Jan 2006 15:04:05 MST\" RFC1123Z = \"Mon, 02 Jan 2006 15:04:05 -0700\" // RFC1123 with numeric zone RFC3339 = \"2006-01-02T15:04:05Z07:00\" RFC3339Nano = \"2006-01-02T15:04:05.999999999Z07:00\" Kitchen = \"3:04PM\" // Handy time stamps. Stamp = \"Jan _2 15:04:05\" StampMilli = \"Jan _2 15:04:05.000\" StampMicro = \"Jan _2 15:04:05.000000\" StampNano = \"Jan _2 15:04:05.000000000\" ) 存在しない時間を指定するとエラーになる もちろん、エラーになります。\npackage main import ( \"fmt\" \"time\" ) func main() { layout := \"2006年01月02日 15時04分05秒 (MST)\" // 例えば、25時という存在しない時間にすると・・・ value := \"2019年07月23日 25時10分11秒 (JST)\" t, e := time.Parse(layout, value) if e != nil { // 下記のように時間が0-23の範囲外であるというエラーが出てきます。 fmt.Println(e) // parsing time \"2019年07月23日 25時10分11秒 (JST)\": hour out of range } fmt.Println(t) // 0001-01-01 00:00:00 +0000 UTC } https://play.golang.org/p/rhndc5_U4he\nタイムゾーンを省略したけど、日本時間にしたい - time.ParseInLocation で指定したタイムゾーンとみなしてパースする 例えば、日本国内のみで使うなら、タイムゾーンをいちいち設定するのは大変面倒だと思います。\ntime.Parse では、フォーマット定義（とパースしたい文字列）でタイムゾーンが指定されていない場合 UTC と判断していましたが、 time.ParseInLocatoin では、指定したタイムゾーンと見做すことができます。\npackage main import ( \"fmt\" \"time\" ) func main() { loc, _ := time.LoadLocation(\"Asia/Tokyo\") // time.ParseInLocation は、フォーマット定義でタイムゾーンが指定されていない場合 // loc で指定されたタイムゾーンとしてパースします layout := \"Jan 2, 2006 at 3:04pm\" value := \"Jul 3, 2019 at 8:07pm\" t, e := time.ParseInLocation(layout, value, loc) if e != nil { fmt.Println(e) } // 上記の場合、 loc が日本なので、 JST とみなします fmt.Println(t) // 2019-07-03 20:07:00 +0900 JST // time.Pasere の場合は UTC とみなします layout = \"Jan 2, 2006 at 3:04pm\" value = \"Jul 3, 2019 at 8:07pm\" t, e = time.Parse(layout, value) if e != nil { fmt.Println(e) } fmt.Println(t) // 2019-07-03 20:07:00 +0000 UTC // フォーマット定義にタイムゾーンが指定されている場合には、指定されたタイムゾーン通りにパースします layout = \"Jan 2, 2006 at 3:04pm (MST)\" value = \"Jul 3, 2019 at 8:07pm (PST)\" t, e = time.ParseInLocation(layout, value, loc) if e != nil { fmt.Println(e) } fmt.Println(t) // 2019-07-03 20:07:00 +0000 PST } https://play.golang.org/p/ltbXZvzGWTN\n","wordCount":"1692","inLanguage":"en","datePublished":"2019-07-23T00:00:00Z","dateModified":"2019-07-23T00:00:00Z","author":{"@type":"Person","name":"ayasuda"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ayasuda.github.io/pages/snippet_golang_time_parse/"},"publisher":{"@type":"Organization","name":"ayasuda.github.io","logo":{"@type":"ImageObject","url":"https://ayasuda.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ayasuda.github.io/ accesskey=h title="ayasuda.github.io (Alt + H)">ayasuda.github.io</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://ayasuda.github.io/pages/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ayasuda.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ayasuda.github.io/pages/>Pages</a></div><h1 class=post-title>Golang time.Parse の使い方</h1><div class=post-description>Go 言語で文字列を`Time` 構造体に変換する `time.Parse` の使い方をまとめました</div><div class=post-meta>&lt;span title='2019-07-23 00:00:00 +0000 UTC'>2019-07-23&lt;/span>&amp;nbsp;·&amp;nbsp;4 min&amp;nbsp;·&amp;nbsp;1692 words&amp;nbsp;·&amp;nbsp;ayasuda</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#一部の定義を省略する>一部の定義を省略する</a></li><li><a href=#format-と-layout-のフォーマットが違うとエラーになります>format と layout のフォーマットが違うとエラーになります。</a></li><li><a href=#フォーマットに日本語を使う>フォーマットに日本語を使う</a></li></ul></nav></div></details></div><div class=post-content><p>この記事では、Golang で文字列を <code>Time</code> 構造体に変換する <a href=https://golang.org/pkg/time/#Parse><code>time.Parse</code></a> の使い方を解説しつつ
使用例のコード片を提示します。</p><h1 id=基本的な使い方>基本的な使い方<a hidden class=anchor aria-hidden=true href=#基本的な使い方>#</a></h1><p>第１引数に、時刻のフォーマット定義を指定し、第２引数にパースしたい文字列を指定します。</p><p>フォーマットは、<em>必ず 2006年1月2日午後3時4分5秒(山岳部標準時)</em> である必要があります。
なんでこの時間？　と、一瞬思いますが、月日時分秒年の順番で表記した時、左から 1,2,3,4,5,6,7 と増えていきます。</p><p>山岳部標準時は <code>-7</code> です。</p><p>時刻を24時間表記でパースさせたい場合は、<code>15</code> を指定します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// パースする対象である時間がどのように参照されているかのフォーマット定義です
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm (MST)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// パースする対象の文字列です
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Feb 3, 2013 at 7:54pm (PST)&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 2013-02-03 19:54:00 +0000 PST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/Y5yLTbfcULl>https://play.golang.org/p/Y5yLTbfcULl</a></p><h2 id=一部の定義を省略する>一部の定義を省略する<a hidden class=anchor aria-hidden=true href=#一部の定義を省略する>#</a></h2><p>フォーマット定義およびパースしたい文字列から一部の値を外した場合、デフォルトとして 0 が、 0 が設定できない場合 1 が設定されます。
タイムゾーンの場合は UTC が設定されます。</p><p>下記の例では、時刻やタイムゾーンを省略したため、時・分・秒に 0 が、タイムゾーンに UTC がセットされます。
年を省略した場合は 0 が、月・日を省略した場合は、 1 がセットされます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2006-01-02&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2019-07-23&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 2019-07-23 00:00:00 +0000 UTC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/twodyyYITV6>https://play.golang.org/p/twodyyYITV6</a></p><p>つまり、何もかも省略した場合は、<code>0000-01-01 00:00:00 +0000</code> UTC になります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 0000-01-01 00:00:00 +0000 UTC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/1xG2G0FNSd1>https://play.golang.org/p/1xG2G0FNSd1</a></p><h2 id=format-と-layout-のフォーマットが違うとエラーになります>format と layout のフォーマットが違うとエラーになります。<a hidden class=anchor aria-hidden=true href=#format-と-layout-のフォーマットが違うとエラーになります>#</a></h2><p>例えば、下記の例を見てみましょう。</p><p>フォーマット定義ではタイムゾーン指定を削りましたが、パースしたい文字列ではタイムゾーンが指定されています。なので、エラーになります。。
この場合、パースすると必ず <code>0001-01-01 00:00:00 +0000 UTC</code> になります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Feb 3, 2013 at 7:54pm (PST)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// parsing time &#34;Oct 3, 1986 at 8:07am (PST)&#34;: extra text:  (PST)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 0001-01-01 00:00:00 +0000 UTC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/JOeniv_Y0Wv>https://play.golang.org/p/JOeniv_Y0Wv</a></p><h2 id=フォーマットに日本語を使う>フォーマットに日本語を使う<a hidden class=anchor aria-hidden=true href=#フォーマットに日本語を使う>#</a></h2><p>フォーマットに使用する日時さえあってれば可能です。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2006年01月02日 15時04分05秒 (MST)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2019年07月23日 20時10分11秒 (JST)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 2019-07-23 20:10:11 +0000 JST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/dlwONJnLH8i>https://play.golang.org/p/dlwONJnLH8i</a></p><h1 id=組み込みフォーマット>組み込みフォーマット<a hidden class=anchor aria-hidden=true href=#組み込みフォーマット>#</a></h1><p><a href=https://golang.org/pkg/time/#pkg-constants>timeパッケージの定数</a> に定義されています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>const</span> (
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ANSIC</span>       = <span style=color:#e6db74>&#34;Mon Jan _2 15:04:05 2006&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>UnixDate</span>    = <span style=color:#e6db74>&#34;Mon Jan _2 15:04:05 MST 2006&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RubyDate</span>    = <span style=color:#e6db74>&#34;Mon Jan 02 15:04:05 -0700 2006&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RFC822</span>      = <span style=color:#e6db74>&#34;02 Jan 06 15:04 MST&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RFC822Z</span>     = <span style=color:#e6db74>&#34;02 Jan 06 15:04 -0700&#34;</span> <span style=color:#75715e>// RFC822 with numeric zone
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>RFC850</span>      = <span style=color:#e6db74>&#34;Monday, 02-Jan-06 15:04:05 MST&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RFC1123</span>     = <span style=color:#e6db74>&#34;Mon, 02 Jan 2006 15:04:05 MST&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RFC1123Z</span>    = <span style=color:#e6db74>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span> <span style=color:#75715e>// RFC1123 with numeric zone
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>RFC3339</span>     = <span style=color:#e6db74>&#34;2006-01-02T15:04:05Z07:00&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RFC3339Nano</span> = <span style=color:#e6db74>&#34;2006-01-02T15:04:05.999999999Z07:00&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kitchen</span>     = <span style=color:#e6db74>&#34;3:04PM&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Handy time stamps.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Stamp</span>      = <span style=color:#e6db74>&#34;Jan _2 15:04:05&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StampMilli</span> = <span style=color:#e6db74>&#34;Jan _2 15:04:05.000&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StampMicro</span> = <span style=color:#e6db74>&#34;Jan _2 15:04:05.000000&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>StampNano</span>  = <span style=color:#e6db74>&#34;Jan _2 15:04:05.000000000&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h1 id=存在しない時間を指定するとエラーになる>存在しない時間を指定するとエラーになる<a hidden class=anchor aria-hidden=true href=#存在しない時間を指定するとエラーになる>#</a></h1><p>もちろん、エラーになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2006年01月02日 15時04分05秒 (MST)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 例えば、25時という存在しない時間にすると・・・
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;2019年07月23日 25時10分11秒 (JST)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 下記のように時間が0-23の範囲外であるというエラーが出てきます。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// parsing time &#34;2019年07月23日 25時10分11秒 (JST)&#34;: hour out of range
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 0001-01-01 00:00:00 +0000 UTC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/rhndc5_U4he>https://play.golang.org/p/rhndc5_U4he</a></p><h1 id=タイムゾーンを省略したけど日本時間にしたい---timeparseinlocation-で指定したタイムゾーンとみなしてパースする>タイムゾーンを省略したけど、日本時間にしたい - <code>time.ParseInLocation</code> で指定したタイムゾーンとみなしてパースする<a hidden class=anchor aria-hidden=true href=#タイムゾーンを省略したけど日本時間にしたい---timeparseinlocation-で指定したタイムゾーンとみなしてパースする>#</a></h1><p>例えば、日本国内のみで使うなら、タイムゾーンをいちいち設定するのは大変面倒だと思います。</p><p><code>time.Parse</code> では、フォーマット定義（とパースしたい文字列）でタイムゾーンが指定されていない場合 <code>UTC</code> と判断していましたが、
<code>time.ParseInLocatoin</code> では、指定したタイムゾーンと見做すことができます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loc</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>LoadLocation</span>(<span style=color:#e6db74>&#34;Asia/Tokyo&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// time.ParseInLocation は、フォーマット定義でタイムゾーンが指定されていない場合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// loc で指定されたタイムゾーンとしてパースします 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>layout</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Jul 3, 2019 at 8:07pm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>ParseInLocation</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>loc</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 上記の場合、 loc が日本なので、 JST とみなします
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 2019-07-03 20:07:00 +0900 JST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// time.Pasere の場合は UTC とみなします
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>layout</span> = <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> = <span style=color:#e6db74>&#34;Jul 3, 2019 at 8:07pm&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> = <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Parse</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 2019-07-03 20:07:00 +0000 UTC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// フォーマット定義にタイムゾーンが指定されている場合には、指定されたタイムゾーン通りにパースします
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>layout</span> = <span style=color:#e6db74>&#34;Jan 2, 2006 at 3:04pm (MST)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span> = <span style=color:#e6db74>&#34;Jul 3, 2019 at 8:07pm (PST)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>e</span> = <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>ParseInLocation</span>(<span style=color:#a6e22e>layout</span>, <span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>loc</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 2019-07-03 20:07:00 +0000 PST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><a href=https://play.golang.org/p/ltbXZvzGWTN>https://play.golang.org/p/ltbXZvzGWTN</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ayasuda.github.io/tags/go/>Go</a></li></ul><nav class=paginav><a class=prev href=https://ayasuda.github.io/pages/challenge_aoc2019_day1/><span class=title>« Prev</span><br><span>今年はどのアドベントカレンダーにも投稿しないから、俺は AoC をただ解いていこうと思う。1 日目</span>
</a><a class=next href=https://ayasuda.github.io/pages/note_configuration_order_at_command_line/><span class=title>Next »</span><br><span>コマンドラインツールでの設定値の優先順（設定ファイル・環境変数・コマンドライン引数）</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://ayasuda.github.io/>ayasuda.github.io</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>